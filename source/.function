#!/bin/bash

ecs_exec() {
  if [ -z "$1" ]; then
    echo "Missing ECS name"
    return 1
  fi

  local ecs_name="$1"

  if [ -n "$2" ]; then
    export AWS_REGION="$2"
  fi

  aws ecs execute-command --region "$AWS_REGION" --cluster "$ecs_name" \
    --task "$(aws ecs list-tasks --cluster "$ecs_name" --service-name "$ecs_name" \
      --output text --query 'taskArns[0]')" --container "$ecs_name" --command "/bin/bash" --interactive
}
